{
	"info": {
		"_postman_id": "deepseek-translation-api-001",
		"name": "Translation API",
		"description": "Complete Postman collection for testing Translation API endpoints. Includes paragraph translation, sentence generation, sentence enhancement, and expression generation.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/health",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"health"
					]
				},
				"description": "Check if all services are initialized and healthy"
			},
			"response": []
		},
		{
			"name": "1. Translate Paragraph",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"text\": \"Machine learning has revolutionized the way we approach data analysis. By leveraging advanced algorithms, companies can now extract meaningful insights from vast amounts of information.\",\n  \"extract_highlights\": true\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/paragraph/translate",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"paragraph",
						"translate"
					]
				},
				"description": "Use Case 1: Translate a paragraph to Chinese and extract highlight entries (important words/phrases for learning)"
			},
			"response": []
		},
		{
			"name": "2. Generate Sentences from Paragraph",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"text\": \"The new library opened last week. It features modern architecture and comfortable reading spaces. Students from nearby schools often visit on weekends.\",\n  \"episode_id\": 101,\n  \"split_by\": \"sentence\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/paragraph/generate-sentences",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"paragraph",
						"generate-sentences"
					]
				},
				"description": "Use Case 2: Split paragraph into sentences, then enhance each with translation, phonetic transcription, and highlights. Processes in parallel for better performance."
			},
			"response": []
		},
		{
			"name": "3. Enhance Single Sentence",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"en\": \"Thanks to cutting-edge technology, we can now figure out complex problems much faster.\",\n  \"episode_id\": 201,\n  \"episode_sequence\": 5,\n  \"start_ts\": 12.5,\n  \"end_ts\": 16.8\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/sentence/enhance",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"sentence",
						"enhance"
					]
				},
				"description": "Use Case 3: Enhance a single sentence with Chinese translation, US phonetic transcription (IPA), and highlight entries"
			},
			"response": []
		},
		{
			"name": "4. Generate Expressions from Sentences",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"sentences\": [\n    {\n      \"en\": \"I got pulled in by the fascinating documentary about ocean life.\",\n      \"zh\": \"我被这部关于海洋生物的精彩纪录片所吸引。\",\n      \"sentence_id\": \"sent_001\",\n      \"episode_id\": 301,\n      \"episode_sequence\": 1\n    },\n    {\n      \"en\": \"Thanks to modern technology, scientists can explore the deep sea at the very last minute.\",\n      \"zh\": \"多亏了现代技术,科学家们可以在最后一刻探索深海。\",\n      \"sentence_id\": \"sent_002\",\n      \"episode_id\": 301,\n      \"episode_sequence\": 2\n    },\n    {\n      \"en\": \"Marine enthusiasts from around the world moved to coastal cities to study ocean phenomena.\",\n      \"zh\": \"来自世界各地的海洋爱好者搬到沿海城市研究海洋现象。\",\n      \"sentence_id\": \"sent_003\",\n      \"episode_id\": 301,\n      \"episode_sequence\": 3\n    }\n  ],\n  \"episode_id\": 301,\n  \"max_input_tokens\": 2500,\n  \"max_workers\": 4\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/expression/generate",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"expression",
						"generate"
					]
				},
				"description": "Use Case 4: Generate expression data from sentences - extracts phrasal verbs, idioms, collocations with meanings, examples, word relations, and matched sentences"
			},
			"response": []
		},
		{
			"name": "5. Get Video Transcript (by Video ID)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"video_id\": \"dQw4w9WgXcQ\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/video/transcript",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"video",
						"transcript"
					]
				},
				"description": "Use Case 5: Fetch YouTube video transcript with timestamps. Supports video_id or video_url. Returns timestamped segments, full transcript text, metadata, and uploads to R2 storage. Rate limited to 1 request per 5 seconds per IP."
			},
			"response": []
		},
		{
			"name": "5. Get Video Transcript (by Video URL)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"video_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/video/transcript",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"video",
						"transcript"
					]
				},
				"description": "Use Case 5: Fetch YouTube video transcript using full YouTube URL. Also supports short URLs like https://youtu.be/VIDEO_ID. Rate limited to 1 request per 5 seconds per IP."
			},
			"response": []
		},
		{
			"name": "6. Generate Sentence Audio",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"sentences\": [\n    \"I was so exhausted because obviously I didn't sleep the night before because I was so nervous about the event.\",\n    \"The event went well and I'm actually really proud of myself, because I was saying to my friend yesterday, like I was kind of beating myself up before I went and was like, you know, you need to be bubbly, you need to be loud, you need to be really chatty, you need to make a really good impression, stuff like that.\",\n    \"And because I'm naturally shy and quiet, that doesn't come easily to me.\"\n  ],\n  \"voice\": \"en-US-AvaMultilingualNeural\",\n  \"max_workers\": 4\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/sentence/generate-audio",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"sentence",
						"generate-audio"
					]
				},
				"description": "Use Case 6: Generate MP3 audio files for sentences and upload to COS and R2 storage. Simply provide an array of sentence texts (strings). Audio files are generated using Edge TTS, named with MD5 hash of the sentence text, and uploaded to both COS (Tencent Cloud) and R2 (Cloudflare) storage. The simplified API only requires sentence text - no metadata like IDs, timestamps, or translations needed."
			},
			"response": []
		},
		{
			"name": "7. List All Episodes",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/episode/list",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"episode",
						"list"
					]
				},
				"description": "List all available episode files stored on the server with metadata including sentence count, version, timestamps, and file size."
			},
			"response": []
		},
		{
			"name": "8. Read Episode",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/episode/245",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"episode",
						"245"
					]
				},
				"description": "Read a specific episode file with all sentences and metadata. Replace '245' with the episode ID you want to read."
			},
			"response": []
		},
		{
			"name": "9. Update Entire Episode",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"sentences\": [\n    {\n      \"episode_id\": 245,\n      \"episode_sequence\": 1,\n      \"en\": \"This is the first sentence.\",\n      \"zh\": \"这是第一句话。\",\n      \"phonetic_us\": \"ðɪs ɪz ðə fɜːrst ˈsɛntəns.\",\n      \"highlight_entries\": [\n        {\n          \"slug\": \"first\",\n          \"display_text\": \"first\",\n          \"translation_zh\": \"第一个\"\n        }\n      ],\n      \"sentence_hash\": \"abc123def456\"\n    },\n    {\n      \"episode_id\": 245,\n      \"episode_sequence\": 2,\n      \"en\": \"This is the second sentence.\",\n      \"zh\": \"这是第二句话。\",\n      \"phonetic_us\": \"ðɪs ɪz ðə ˈsɛkənd ˈsɛntəns.\",\n      \"highlight_entries\": [],\n      \"sentence_hash\": \"def456ghi789\"\n    }\n  ],\n  \"metadata\": {\n    \"updated_by\": \"team_member_1\",\n    \"notes\": \"Updated all sentences for episode 245\"\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/episode/245",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"episode",
						"245"
					]
				},
				"description": "Update an entire episode file (full replacement). All sentences and metadata are replaced. Useful for bulk updates. Replace '245' with your episode ID."
			},
			"response": []
		},
		{
			"name": "10. Update Single Sentence",
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"sentence\": {\n    \"episode_id\": 245,\n    \"episode_sequence\": 1,\n    \"en\": \"This is the updated first sentence.\",\n    \"zh\": \"这是更新后的第一句话。\",\n    \"phonetic_us\": \"ðɪs ɪz ði ʌpˈdeɪtɪd fɜːrst ˈsɛntəns.\",\n    \"highlight_entries\": [\n      {\n        \"slug\": \"updated\",\n        \"display_text\": \"updated\",\n        \"translation_zh\": \"更新的\"\n      }\n    ],\n    \"sentence_hash\": \"abc123def456\"\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/episode/245/sentences/0",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"episode",
						"245",
						"sentences",
						"0"
					]
				},
				"description": "Update a specific sentence in an episode (partial update). The sentence index is 0-based. This is ideal for collaborative editing where team members update individual sentences. Replace '245' with episode ID and '0' with the sentence index."
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}
